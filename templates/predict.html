<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Predict Brick Properties</title>
  <style> body{font-family:Arial;margin:20px;} .result{border:1px solid #ddd;padding:12px;border-radius:8px;margin-top:12px;} </style>
</head>
<body>
  <a href="{{ url_for('index') }}">‚Üê Home</a>
  <h2>Predict Brick Properties</h2>

  {% if error %}
    <div style="color:red">{{ error }}</div>
  {% endif %}

  <form method="post" enctype="multipart/form-data">
    <label>Upload brick image</label><br>
    <input type="file" name="file" accept="image/*" required><br><br>
    <label>Dry weight (grams)</label><br>
    <input type="number" name="dry_weight" value="2800" min="1500" max="3500" step="1"><br><br>
    <button type="submit">Upload & Predict</button>
  </form>

  {% if filename %}
    <div class="result">
      <h3>Uploaded</h3>
      <img src="{{ url_for('uploaded_file', filename=filename) }}" style="max-width:360px;"><br>
      {% if not_brick %}
        <p style="color:red">This is not a brick. Please upload a valid brick image.</p>
      {% else %}
        <p><strong>Estimated Flexural Load:</strong> {{ strength }} kN</p>
        <p><strong>Estimated Water Absorption:</strong> {{ absorption }} %</p>
        <h4>Classification Probabilities</h4>
        <ul>
          <li>1st Class: {{ probs[0]|round(2) }}%</li>
          <li>2nd Class: {{ probs[1]|round(2) }}%</li>
          <li>3rd Class: {{ probs[2]|round(2) }}%</li>
          <li>Not a Brick: {{ probs[3]|round(2) }}%</li>
        </ul>
      {% endif %}
    </div>
  {% endif %}
</body>
</html>
